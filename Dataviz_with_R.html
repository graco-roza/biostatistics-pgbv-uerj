<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>DataViz with R  </title>
    <meta charset="utf-8" />
    <meta name="author" content="Caio Graco-Roza Marcelo Manzi Marinho" />
    <script src="Dataviz_with_R_files/header-attrs-2.7/header-attrs.js"></script>
    <link href="Dataviz_with_R_files/tachyons-4.12.0/tachyons.min.css" rel="stylesheet" />
    <script src="Dataviz_with_R_files/xaringanExtra_fit-screen-0.2.5.9000/fit-screen.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# <b>DataViz with R</b><br><br>
## <i>Tidying, transforming and vizualizing data.</i><br><br>
### Caio Graco-Roza<br>Marcelo Manzi Marinho

---



class: inverse, center, middle

#Frustration is natural when you start programming in R!
--
&lt;img src="https://media3.giphy.com/media/dTWMMFwgtmc1Gcghm2/200w.webp?cid=ecf05e479vyi7liq7d3001ih6zmwge3f0ifgyjz0hr8v5069&amp;rid=200w.webp", width="70%"&gt;

---

#Persistance is the key

## Let's review some basics

Remember that R is a very efficient calculator
.pull-left[

```r
1 / 200 * 30
# &gt; [1] 0.15
(59 + 73 + 2) / 3
# &gt; [1] 44.66667
sin(pi / 2)
# &gt; [1] 1
```
We often use `&lt;-` to give *names* to values and call them `objects`.


```r
x &lt;- 3 * 4
```
]
.pull-right[
&lt;img src="https://media2.giphy.com/media/APqEbxBsVlkWSuFpth/giphy.webp?cid=ecf05e47v4uldhewzt26r4u4crrgeh0x79jrs1dwp7sbj7gx&amp;rid=giphy.webp", width="80%"&gt;]

---
class: center, top
#Visualisation is important, but tidying is paramount.
--

&lt;img src="https://media4.giphy.com/media/KE9cblgPK6EPS/200w.webp?cid=ecf05e47w3qvr0c299vlu8hi8xjjqgl1syn3t7e16iebei6y&amp;rid=200w.webp", width="70%"&gt;

---

#Working on transformation

.pull-left[
&lt;img src="https://media0.giphy.com/media/TJHcpldoI0zAY/200.webp?cid=ecf05e477orlaj6p24o3kstwyon542jdipxps4flufcxur7i&amp;rid=200.webp", width="100%", style='border: 10'&gt;
]

--

.pull-right[

First we load the packages `nycfligthts13` and `tydyverse`. 

**Remember how?**
]

--

.bg-lightpurple.b--black.ba.bw2.br3.shadow-5.ph4.mt5[


```r
library(nycflights13)
library(tidyverse)
```
]
---
#NYCFLIGHTS13*

The data frame contains all 336,776 flights that departed from New York City in 2013.




```r
flights
```

```
## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
....
```

.footnote[[*] Section 5.2. of  &lt;span style='color:yellow'&gt;`R for Data Science`&lt;/span&gt;]

---

#First things first

There are many variables classes, but for now let's focus on the most usual for the attendants of this course.

You may have noted the number under the column names. These describe the variable type:

.bg-transparent.b--.ba.bw2.br3.shadow-5.ph4.mt5[
- `int` stands for integers.
- `dbl` stands for double.
- `chr` stands for characters vectors or strings.

.tr[
— R for Data Science
]
]
---

#Manipulating your data

`filter()` allows you to subset observations based on their values.

For example, if we want to check only the flights that departed in December.


```r
filter(flights, month == 12)
```

```
## # A tibble: 28,135 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013    12     1       13           2359        14      446
##  2  2013    12     1       17           2359        18      443
##  3  2013    12     1      453            500        -7      636
##  4  2013    12     1      520            515         5      749
##  5  2013    12     1      536            540        -4      845
##  6  2013    12     1      540            550       -10     1005
##  7  2013    12     1      541            545        -4      734
....
```



**&lt;snap style='font-size: 150%'&gt;Now how can we check only the flights that departed in July?&lt;/snap&gt;**

---
https://d33wubrfki0l68.cloudfront.net/01f4b6d39d2be8269740a3ad7946faa79f7243cf/8369a/diagrams/transform-logical.png
#Comparisons

To use filtering effectively, you have to know how to select the observations that you want using the comparison operators. R provides the standard suite: `&gt;`, `&gt;=`, `&lt;`, `&lt;=`, `!=` (not equal), and `==` (equal).

###Here's a tip:
.bg-washed-grey.b--.ba.bw2.br3.shadow-5.ph4.mt5[
Multiple arguments to `filter()` are combined with “and”: every expression must be true in order for a row to be included in the output. For other types of combinations, you’ll need to use *Boolean operators*:  
&lt;br&gt;
- `&amp;` for “and”;  
- `|` for “or”;  
- `!` for “not”.
]

---

#What are Boolean operators?

.pull-left[The figure below describes a complete set of boolean operations. **x** is the left-hand circle, **y** is the right-hand circle, and the shaded region show which parts each operator selects.]
.pull-right[

```r
filter(flights, month == 11|month == 12)
filter(flights, month == (11|12)) #why not?
filter(flights, !(arr_delay &gt; 120 | dep_delay &gt; 120))
filter(flights, arr_delay &lt;= 120, dep_delay &lt;= 120)
```

]
&lt;img src="https://d33wubrfki0l68.cloudfront.net/01f4b6d39d2be8269740a3ad7946faa79f7243cf/8369a/diagrams/transform-logical.png", width="70%"&gt;
.pull-right[Figure &lt;span style='color:yellow'&gt;`5.1`&lt;/span&gt; in &lt;span style='color:yellow'&gt;`R for Data Science`&lt;/red&gt;]


---
class:left,top
#Missing values

When working on experiments or even collecting data. We often have missing information from e.g., when the equipment decides to not work during field work, or the day you get sick and cannot go to the lab to follow your thesis daily experiment. 

This will lead to empty cells in your excel table that you may or may not want to consider when running you analysis. In R, these empty spaces are known as NA s ("not available").

.bg-transparent.b--.ba.bw2.br3.shadow-5.ph4.mt5[


&lt;span style='color:red; font-size: 120%'&gt; **Boring alert!!** &lt;/span&gt;  

Almost any operation involving an unknown value will also be unknown

]
---
class:left,top
#Missing values
.pull-left[

```r
NA &gt; 5
```

```
## [1] NA
```

```r
10 == NA
```

```
## [1] NA
```
]

.pull-right[


```r
NA / 2
```

```
## [1] NA
```

```r
NA == NA
```

```
## [1] NA
```
]

Maybe it is easier if we translate this into human language?


```r
# Let x be my age. You don't know how old I am.
x &lt;- NA
# Let y be Marcelo's age. We don't know how old he is.
y &lt;- NA
# Are John and Mary the same age?
x == y
```

```
## [1] NA
```

---

#Exercises

Find all flights that
- Had an arrival delay of two or more hours
- Flew to Houston (IAH or HOU)
- Were operated by United, American, or Delta
- Departed in winter (July, August, and September)
- Arrived more than two hours late, but didn’t leave late
- Were delayed by at least an hour, but made up over 30 minutes in flight
- Departed between midnight and 6am (inclusive)
- Another useful `dplyr` filtering helper is `between()`. What does it do? Can you use it to simplify the code needed to answer the previous challenges?
- How many flights have a missing `dep_time`? What other variables are missing? What might these rows represent?
- Why is `NA ^ 0` not missing? Why is `NA | TRUE` not missing? Why is `FALSE &amp; NA` not missing? Can you figure out the general rule? (`NA * 0` is a tricky counterexample!).

.footnote[Exercises from ***R for Data Science***]
---

# Arranging lines 

`arrange()` works similarly to `filter()` except that instead of selecting rows, it changes their order.


```r
arrange(flights, year, month, day)
```

```
## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;
##  1  2013     1     1      517            515         2      830            819        11
##  2  2013     1     1      533            529         4      850            830        20
##  3  2013     1     1      542            540         2      923            850        33
##  4  2013     1     1      544            545        -1     1004           1022       -18
##  5  2013     1     1      554            600        -6      812            837       -25
##  6  2013     1     1      554            558        -4      740            728        12
##  7  2013     1     1      555            600        -5      913            854        19
##  8  2013     1     1      557            600        -3      709            723       -14
##  9  2013     1     1      557            600        -3      838            846        -8
## 10  2013     1     1      558            600        -2      753            745         8
## # … with 336,766 more rows, and 10 more variables: carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;
```

---

# Arranging lines


```r
arrange(flights, desc(dep_delay))
```

```
## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;
##  1  2013     1     9      641            900      1301     1242           1530      1272
##  2  2013     6    15     1432           1935      1137     1607           2120      1127
##  3  2013     1    10     1121           1635      1126     1239           1810      1109
##  4  2013     9    20     1139           1845      1014     1457           2210      1007
##  5  2013     7    22      845           1600      1005     1044           1815       989
##  6  2013     4    10     1100           1900       960     1342           2211       931
##  7  2013     3    17     2321            810       911      135           1020       915
##  8  2013     6    27      959           1900       899     1236           2226       850
##  9  2013     7    22     2257            759       898      121           1026       895
## 10  2013    12     5      756           1700       896     1058           2020       878
## # … with 336,766 more rows, and 10 more variables: carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;
```

In case of `NA`s, these will always go in the end of the data.

---

# Selecting columns

`select()` is very useful if your data has many columns.


```r
select(flights, year, month, day)
```

```
## # A tibble: 336,776 x 3
##     year month   day
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1  2013     1     1
##  2  2013     1     1
##  3  2013     1     1
##  4  2013     1     1
##  5  2013     1     1
##  6  2013     1     1
##  7  2013     1     1
##  8  2013     1     1
##  9  2013     1     1
## 10  2013     1     1
## # … with 336,766 more rows
```

---

#Adding new variables.

There are many ways to create new variables. Here we will focus on using the `mutate()` function from `dplyr`.


```r
#First, we select columns and store them in the `flights_sml` object
flights_sml &lt;- select(flights, 
  year:day, ends_with("delay"), 
  distance, air_time)
#Then we use the new object and create new variables from the existent ones.
mutate(flights_sml,
  gain = dep_delay - arr_delay,
  speed = distance / air_time * 60
)
```

```
## # A tibble: 336,776 x 9
##     year month   day dep_delay arr_delay distance air_time  gain speed
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  2013     1     1         2        11     1400      227    -9  370.
##  2  2013     1     1         4        20     1416      227   -16  374.
##  3  2013     1     1         2        33     1089      160   -31  408.
##  4  2013     1     1        -1       -18     1576      183    17  517.
##  5  2013     1     1        -6       -25      762      116    19  394.
##  6  2013     1     1        -4        12      719      150   -16  288.
##  7  2013     1     1        -5        19     1065      158   -24  404.
##  8  2013     1     1        -3       -14      229       53    11  259.
##  9  2013     1     1        -3        -8      944      140     5  405.
## 10  2013     1     1        -2         8      733      138   -10  319.
## # … with 336,766 more rows
```

---

#Grouping variables  

`summarise()` collapses a data frame into a single row


```r
summarise(flights, delay = mean(dep_delay, na.rm = TRUE))
```

```
## # A tibble: 1 x 1
##   delay
##   &lt;dbl&gt;
## 1  12.6
```

`summarise()` is also very useful for taking group means and standard deviations


```r
by_day &lt;- group_by(flights, year, month, day)
summarise(by_day, delay = mean(dep_delay, na.rm = TRUE))
```

```
## # A tibble: 365 x 4
## # Groups:   year, month [12]
##     year month   day delay
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
##  1  2013     1     1 11.5 
##  2  2013     1     2 13.9 
##  3  2013     1     3 11.0 
##  4  2013     1     4  8.95
##  5  2013     1     5  5.73
##  6  2013     1     6  7.15
##  7  2013     1     7  5.42
##  8  2013     1     8  2.55
##  9  2013     1     9  2.28
## 10  2013     1    10  2.84
## # … with 355 more rows
```

---

#Combine everything


```r
by_dest &lt;- group_by(flights, dest)
delay &lt;- summarise(by_dest,
  count = n(), # n() counts the number of lines for each group.
  dist = mean(distance, na.rm = TRUE),
  delay = mean(arr_delay, na.rm = TRUE)
)
filter(delay, count &gt; 20, dest != "HNL")
```

```
## # A tibble: 96 x 4
##    dest  count  dist delay
##    &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 ABQ     254 1826   4.38
##  2 ACK     265  199   4.85
##  3 ALB     439  143  14.4 
##  4 ATL   17215  757. 11.3 
##  5 AUS    2439 1514.  6.02
##  6 AVL     275  584.  8.00
##  7 BDL     443  116   7.05
##  8 BGR     375  378   8.03
##  9 BHM     297  866. 16.9 
## 10 BNA    6333  758. 11.8 
## # … with 86 more rows
```

---

#Connecting actions

This code is a little frustrating to write because we have to give each intermediate data frame a name, even though we don’t care about it. We can make it better by using pipes `%&gt;%`

.pull-left[

```r
*delay &lt;- flights %&gt;%
* group_by(dest) %&gt;%
  summarise(
    count = n(),
    dist = mean(distance, na.rm = TRUE),
    delay = mean(arr_delay, na.rm = TRUE)
* ) %&gt;%
filter(count &gt; 20, dest != "HNL")
```
]
--
.pull-right[
&lt;img src="Dataviz_with_R_files/figure-html/unnamed-chunk-15-1.png" style="display: block; margin: auto;" /&gt;
.center[&lt;img src="https://media4.giphy.com/media/kFONSfnHQSEX2NOrh7/giphy.gif", width="70%"&gt;]
]



---
class: inverse, left, top

# Why Data visualization?

Now that we know how to transform our data. Let's check the `Ascomber's quartet dataset` from the package `datasets`.




```r
anscombe
```

```
## # A tibble: 11 x 8
##       x1    x2    x3    x4    y1    y2    y3    y4
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1    10    10    10     8  8.04  9.14  7.46  6.58
##  2     8     8     8     8  6.95  8.14  6.77  5.76
##  3    13    13    13     8  7.58  8.74 12.7   7.71
##  4     9     9     9     8  8.81  8.77  7.11  8.84
##  5    11    11    11     8  8.33  9.26  7.81  8.47
##  6    14    14    14     8  9.96  8.1   8.84  7.04
##  7     6     6     6     8  7.24  6.13  6.08  5.25
##  8     4     4     4    19  4.26  3.1   5.39 12.5 
##  9    12    12    12     8 10.8   9.13  8.15  5.56
## 10     7     7     7     8  4.82  7.26  6.42  7.91
## 11     5     5     5     8  5.68  4.74  5.73  6.89
```
---
class: inverse
# Why Data visualization?

We see that the for any `x`variable there is a `y`. Now let's check the mean and standard deviations of the variables using  `summarise()`.




```r
anscombe %&gt;% summarise_all(mean) # take the mean of all columns
```

```
## # A tibble: 1 x 8
##      x1    x2    x3    x4    y1    y2    y3    y4
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     9     9     9     9  7.50  7.50   7.5  7.50
```

```r
anscombe %&gt;% summarise_all(sd) # take the sd of all columns
```

```
## # A tibble: 1 x 8
##      x1    x2    x3    x4    y1    y2    y3    y4
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  3.32  3.32  3.32  3.32  2.03  2.03  2.03  2.03
```
.pull-left[That is very impressive! All `x` and `y` have similar `mean` and `standard deviation`. This probably means that they are somehow similar right.] 
.pull-right[]

---
class: inverse
## Why Data visualization?

&lt;img src="Dataviz_with_R_files/figure-html/unnamed-chunk-19-1.png" style="display: block; margin: auto;" /&gt;

---
class: center, middle

 &lt;span style='color:#004d1a'&gt;"There are no routine statistical questions, only questionable statistical routines."&lt;/span&gt; 
.right[*Sir David Cox*]

--
&lt;br&gt;
&lt;br&gt;

 &lt;span style='color:#004d1a'&gt;“Far better an approximate answer to the right question, which is often vague, than an exact answer to the wrong question, which can always be made precise.” &lt;/span&gt;
.right[*John Tukey*]

---

#Exploratory data analysis - EDA


There is no rule about which questions you should ask to guide your research. However, two types of questions will always be useful for making discoveries within your data. You can loosely word these questions as:

.bg-transparent.b--.ba.bw2.br3.shadow-5.ph4.mt5[
- What type of variation occurs within the variables?

+ What type of covariation occurs between the variables?
]

---

#What do we have to know before starting

A **variable** is a quantity, quality, or property that you can measure.

A **value** is the state of a variable when you measure it. The value of a variable may change from measurement to measurement.

An **observation** is a set of measurements made under similar conditions (you usually make all of the measurements in an observation at the same time and on the same object). An observation will contain several values, each associated with a different variable. I’ll sometimes refer to an observation as a data point.

**Tabular** data is a set of values, each associated with a variable and an observation. Tabular data is tidy if each value is placed in its own “cell”, each variable in its own column, and each observation in its own row.

---

#Variation

The tendency of the values of a variable to change from measurement to measurement


The best way to understand variation is to visualise the distribution of the variable’s values. Here we will look at the `diamonds` data from `ggplot2` 

.pull-left[

![](Dataviz_with_R_files/figure-html/unnamed-chunk-20-1.png)&lt;!-- --&gt;

]

.pull-right[
![](Dataviz_with_R_files/figure-html/unnamed-chunk-21-1.png)&lt;!-- --&gt;
]

---

#Variation

##Typical values

*In both bar charts and histograms, tall bars show the common values of a variable, and shorter bars show less-common values.*

&lt;img src="Dataviz_with_R_files/figure-html/unnamed-chunk-22-1.png" style="display: block; margin: auto;" /&gt;


---

#Clumps

Cluster of similar values may appear in our data. It can be insightful to give it a thought.

&lt;img src="Dataviz_with_R_files/figure-html/unnamed-chunk-23-1.png" style="display: block; margin: auto;" /&gt;

Here we see the length (in minutes) of 272 eruptions of the Old Faithful Geyser in Yellowstone National Park. 

---

#Unusual values

*Outliers are observations that are unusual; data points that don’t seem to fit the pattern. Sometimes outliers are data entry errors; other times outliers suggest important new science.*

They are hard to spot in some cases... let's check our precious `diamonds` again. The `y` value represents one of the diamonds dimension.

.pull-left[
![](Dataviz_with_R_files/figure-html/unnamed-chunk-24-1.png)&lt;!-- --&gt;
]

--

.pull-right[

![](Dataviz_with_R_files/figure-html/unnamed-chunk-25-1.png)&lt;!-- --&gt;
]

---
#Dealing with unusual values

It is advisable to always look for the unnusual values in your data.

.pull-left[

```r
unusual &lt;- diamonds %&gt;%  
* filter(y &lt; 3 | y &gt; 20) %&gt;%
  select(price, x, y, z) %&gt;%
  arrange(y)
unusual # let's check the outliers
```

```
## # A tibble: 9 x 4
##   price     x     y     z
##   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  5139  0      0    0   
## 2  6381  0      0    0   
## 3 12800  0      0    0   
## 4 15686  0      0    0   
## 5 18034  0      0    0   
## 6  2130  0      0    0   
## 7  2130  0      0    0   
## 8  2075  5.15  31.8  5.12
## 9 12210  8.09  58.9  8.06
```
]
--

.pull-right[Probably these are incorrect as we cannot have `size = 0`, also some very big diamonds quite cheap.
&lt;br&gt;
&lt;br&gt;

&lt;img src="https://media4.giphy.com/media/OqAeQrGmU7lS6tENnQ/200w.webp?cid=ecf05e47pgch0l3kvuj1asp0z6g65a3g8zrosz11mvxdg0na&amp;rid=200w.webp", width="100%"&gt;
]
---

#Dealing with unusual values

If you’ve encountered unusual values in your dataset, and simply want to move on to the rest of your analysis, you have two options.

 - Drop the entire row with the strange values.  
 **You should be able do it alone at this stage**
 
- Replace the unusual values with missing values (or NA).


```r
diamonds2 &lt;- diamonds %&gt;% 
  mutate(y = ifelse(y &lt; 3 | y &gt; 20, NA, y))
```

---

#Missing values

Sometimes missing values can be somehow informative. In the `flights` datas, `dep_time` indicates cancelled flights, for example.


```r
flights %&gt;%
  mutate(
*   cancelled = is.na(dep_time),
    sched_hour = sched_dep_time %/% 100,
    sched_min = sched_dep_time %% 100,
    sched_dep_time = sched_hour + sched_min / 60
  )
```


&lt;img src="Dataviz_with_R_files/figure-html/unnamed-chunk-29-1.png" style="display: block; margin: auto;" /&gt;


---

#Covariation

*The tendency for the values of two or more variables to vary together in a related way*


.pull-left[
&lt;p align="justify"&gt; It’s common to want to explore the distribution of a continuous variable broken down by a categorical variable.&lt;/p&gt;

![](Dataviz_with_R_files/figure-html/Overlayed lines-1.png)&lt;!-- --&gt;
]
--
.pull-right[
 Instead of counts, we can display density.
 
 &lt;br&gt;
 &lt;br&gt;
![](Dataviz_with_R_files/figure-html/Density lines-1.png)&lt;!-- --&gt;

]


---

#Covariation

A **boxplot** comes handy for a distribution of values across categories.

&lt;img src="https://d33wubrfki0l68.cloudfront.net/153b9af53b33918353fda9b691ded68cd7f62f51/5b616/images/eda-boxplot.png"&gt;

---

#Compare values with boxplots

&lt;img src="Dataviz_with_R_files/figure-html/unnamed-chunk-30-1.png" style="display: block; margin: auto;" /&gt;

---

#Two categorical variables

.pull-left[

![](Dataviz_with_R_files/figure-html/count plot-1.png)&lt;!-- --&gt;
]

.pull-right[

![](Dataviz_with_R_files/figure-html/raster plot-1.png)&lt;!-- --&gt;

]

---

#Two continuous variables
.pull-left[
&lt;img src="Dataviz_with_R_files/figure-html/unnamed-chunk-31-1.png" style="display: block; margin: auto;" /&gt;
]

.pull-right[
&lt;img src="Dataviz_with_R_files/figure-html/unnamed-chunk-32-1.png" style="display: block; margin: auto;" /&gt;
]

![](Dataviz_with_R_files/figure-html/unnamed-chunk-33-1.png)&lt;!-- --&gt;
---
#Is this the end?

Until now, we saw graphics for numeric and categorical variables for univariate and bivariate analysis.

But this is just the beggining. Let's check a bit more of graphics that you may apply to your data.  

--
We wil be following the ideas from the **Graphic continuum** by [Jon Schwabish](https://twitter.com/jschwabish) and [Severinno Ribecca](http://www.severinoribecca.one/) that has been published in [Data to Viz](https://www.data-to-viz.com/).
&lt;br&gt;

.center[&lt;img src="https://media1.giphy.com/media/JEfkiZHu8Y0bS/200w.webp?cid=ecf05e47p6pmzuvxtw461hf4o70aktdguqxy78ucvkrgybm1&amp;rid=200w.webp", width='70%'&gt;]

---

&lt;!-- class: title-page, middle, center --&gt;

&lt;!-- #One numeric variable --&gt;

&lt;!-- --- --&gt;

&lt;!-- #Histogram --&gt;

&lt;!-- A histogram takes as input a numeric variable only. The variable is cut into several bins, and the number of observation per bin is represented by the height of the bar. It is possible to represent the distribution of several variable on the same axis using this technique. --&gt;


&lt;!-- ```{r, echo=FALSE, message=FALSE, warning=FALSE, fig.width=10, fig.height=5} --&gt;

&lt;!-- # Load dataset from github --&gt;
&lt;!-- rooms &lt;- read.table("https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/1_OneNum.csv", header=TRUE) --&gt;

&lt;!-- rooms %&gt;% --&gt;
&lt;!--   filter( price&lt;300 ) %&gt;% --&gt;
&lt;!--   ggplot( aes(x=price)) + --&gt;
&lt;!--     stat_bin(breaks=seq(0,300,10), alpha=0.9) + --&gt;
&lt;!--     ggtitle("Night price distribution of Airbnb appartements") + --&gt;
&lt;!--   theme_xaringan() + --&gt;
&lt;!--   scale_xaringan_fill_continuous() --&gt;


&lt;!-- ``` --&gt;
&lt;!-- --- --&gt;

&lt;!-- #Density --&gt;

&lt;!-- A density plot shows the distribution of a `numeric` variable. It takes only `numeric` variables as input and is very close from an `histogram`. It can be use in the same exact condition. --&gt;

&lt;!-- ```{r, echo=FALSE, message=FALSE, warning=FALSE, fig.width=10, fig.height=5} --&gt;

&lt;!-- # Load dataset from github --&gt;
&lt;!-- rooms &lt;- read.table("https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/1_OneNum.csv", header=TRUE) --&gt;

&lt;!-- rooms %&gt;% --&gt;
&lt;!--   filter(price&lt;300 ) %&gt;% --&gt;
&lt;!--   ggplot(aes(x=price)) + --&gt;
&lt;!--     geom_density(alpha=0.7, bw=10, fill="#967bb6") + --&gt;
&lt;!--     ggtitle("Night price distribution of Airbnb appartements") + --&gt;
&lt;!--   theme_xaringan() + --&gt;
&lt;!--   scale_xaringan_colour_continuous() --&gt;


&lt;!-- ``` --&gt;

&lt;!-- --- --&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightLines": true,
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
